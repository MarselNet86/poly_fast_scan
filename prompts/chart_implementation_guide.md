# ะัะบะพะฒะพะดััะฒะพ ะฟะพ ัะตะฐะปะธะทะฐัะธะธ ะณัะฐัะธะบะพะฒ ะดะฐัะฑะพัะดะฐ
## ะะฝะฐะปะธะท ะธ ัะตะบะพะผะตะฝะดะฐัะธะธ: ะะธะฝะฐะผะธัะตัะบะธะต vs ะกัะฐัะธัะตัะบะธะต

> **ะะฐัะฐ:** 2026-02-14
> **ะัะฝะพะฒะฐะฝะพ ะฝะฐ:** `chart_groups_prompt.md`, `dashboard_review.md`
> **ะขะตะบััะฐั ะฐััะธัะตะบัััะฐ:** Dash + Plotly ั playback ัะธััะตะผะพะน

---

## ะัะธัะตัะธะธ ะบะปะฐััะธัะธะบะฐัะธะธ

### ๐ฌ ะะะะะะะงะะกะะะ ะณัะฐัะธะบะธ (ั playback)
ะัะฟะพะปัะทััั ัะธััะตะผั ะฒะพัะฟัะพะธะทะฒะตะดะตะฝะธั ั ะฒัะตะผะตะฝะฝะพะน ัะบะฐะปะพะน:
- **ะััะพะบะพัะฐััะพัะฝัะต ะดะฐะฝะฝัะต** (~1 ัะตะบ ะพะฑะฝะพะฒะปะตะฝะธั)
- **ะัะธัะธัะฝั ะดะปั ะฟะพะฝะธะผะฐะฝะธั ัะฒะพะปััะธะธ** ััะฝะบะฐ ะฒะพ ะฒัะตะผะตะฝะธ
- **ะขะพัะณะพะฒัะต ัะธะณะฝะฐะปั** ะทะฐะฒะธััั ะพั ะฟะฐััะตัะฝะพะฒ ะธะทะผะตะฝะตะฝะธั
- **ะะตะพะฑัะพะดะธะผะพ ะฒะธะดะตัั ััะตะฝะดั ะธ momentum**

**ะะตะถะธะผั playback:**
1. **Full Animation** โ ัะพัะผะฐ ะณัะฐัะธะบะฐ ะผะตะฝัะตััั ะบะฐะถะดัะน ะบะฐะดั (Orderbook)
2. **Cursor Animation** โ ะธััะพัะธั ััะฐัะธัะฝะฐ, ะดะฒะธะถะตััั ัะพะปัะบะพ ะผะฐัะบะตั ัะตะบััะตะน ะฟะพะทะธัะธะธ

### ๐ ะกะขะะขะะงะะกะะะ ะฟะฐะฝะตะปะธ (ะธะฝะดะธะบะฐัะพัั)
ะะพะบะฐะทัะฒะฐัั ัะพะปัะบะพ ัะตะบััะตะต ะทะฝะฐัะตะฝะธะต ะฑะตะท ะธััะพัะธะธ:
- **ะะณัะตะณะธัะพะฒะฐะฝะฝัะต ะผะตััะธะบะธ** (ััะตะดะฝะธะต, ััะผะผั)
- **ะขะตะบััะตะต ัะพััะพัะฝะธะต ะฒะฐะถะฝะตะต ะธััะพัะธะธ**
- **ะกะฟัะฐะฒะพัะฝะฐั ะธะฝัะพัะผะฐัะธั** ะดะปั sizing ะฟะพะทะธัะธะน
- **ะะตะดะปะตะฝะฝะพ ะผะตะฝัััะธะตัั ะฟะพะบะฐะทะฐัะตะปะธ**

**ะคะพัะผะฐัั:**
- ะงะธัะปะพะฒัะต ะธะฝะดะธะบะฐัะพัั ั ัะฒะตัะพะฒะพะน ะบะพะดะธัะพะฒะบะพะน
- Gauge / ะฟัะพะณัะตัั-ะฑะฐัั
- Badge / chips ั ะฟะพัะพะณะพะฒัะผะธ ะทะฝะฐัะตะฝะธัะผะธ

---

## ะะตัะฐะปัะฝะฐั ะบะปะฐััะธัะธะบะฐัะธั ะฟะพ ะณััะฟะฟะฐะผ

### โ ะััะฟะฟะฐ 0: Header (Market Timer)
**ะขะธะฟ:** ะกัะฐัะธัะตัะบะฐั ะฟะฐะฝะตะปั (ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)
**ะะพะบะฐัะธั:** Right panel

**ะะพะผะฟะพะฝะตะฝัั:**
- โฑ๏ธ `ะะพ ะทะฐะบัััะธั: MM:SS (XXX ัะตะบ)` โ ะพะฑะฝะพะฒะปัะตััั ัะตัะตะท callback
- ๐ฏ ะฆะฒะตัะพะฒะฐั ะบะพะดะธัะพะฒะบะฐ ะฟะพ ัะฐะทะฐะผ ััะฝะบะฐ (ะทะตะปะตะฝัะน โ ะถะตะปััะน โ ะบัะฐัะฝัะน)

**ะกัะฐััั:** โ ะะตะฐะปะธะทะพะฒะฐะฝะพ ะฒ `right_panel.py`

---

### ๐ฌ ะััะฟะฟะฐ 1: Price & Oracle (BTC Price & Lag)
**ะขะธะฟ:** ะะะะะะะงะะกะะะ (Cursor Animation)
**ะัะธะพัะธัะตั:** ๐ด ะะะะขะะงะะกะะะ (ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)

**ะะตัะตะผะตะฝะฝัะต:**
- `binance_btc_price` โ ะพัะฝะพะฒะฝะฐั ะปะธะฝะธั
- `oracle_btc_price` โ ะฒัะพัะฐั ะปะธะฝะธั (ะผะพะถะตั ะธะผะตัั ะฟัะพะฟััะบะธ)
- `lag` โ ะฟะพะดะณัะฐัะธะบ ะธะปะธ ัะฒะตัะฝะฐั ะฟะพะปะพัะฐ

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- Lag > 0 (ะพัะฐะบัะป ะฒััะต) โ ะพะบะฝะพ ะดะปั ะฐัะฑะธััะฐะถะฐ
- ะัะพะฑะพะน VWAP ั ะพะฑัะตะผะพะผ โ ัะธะปัะฝัะน ัะธะณะฝะฐะป

**ะะพัะตะผั ะดะธะฝะฐะผะธัะตัะบะธะน:**
- ะัะธัะธัะตัะบะธ ะฒะฐะถะฝะพ ะฒะธะดะตัั divergence ะผะตะถะดั Binance ะธ Oracle
- Lag ะฟะพะบะฐะทัะฒะฐะตั ะฐัะฑะธััะฐะถะฝัะต ะพะบะฝะฐ, ะบะพัะพััะต ะฒะพะทะฝะธะบะฐัั ะธ ะทะฐะบััะฒะฐัััั ะทะฐ ัะตะบัะฝะดั
- ะฆะตะฝะฐ ะพัะฐะบัะปะฐ ะพะฟัะตะดะตะปัะตั ะธััะพะด ััะฝะบะฐ โ ะฝัะถะฝะฐ ะธััะพัะธั

**ะกัะฐััั:** โ ะะตะฐะปะธะทะพะฒะฐะฝะพ ะบะฐะบ "BTC Price & Lag"

---

### ๐ฌ ะััะฟะฟะฐ 2: Returns / Momentum (Ret1s & Ret5s)
**ะขะธะฟ:** ะะะะะะะงะะกะะะ (Cursor Animation)
**ะัะธะพัะธัะตั:** ๐ด ะะะะขะะงะะกะะะ (ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)

**ะะตัะตะผะตะฝะฝัะต:**
- `binance_ret1s_x100` โ ะฑัััััะน ัะธะณะฝะฐะป
- `binance_ret5s_x100` โ ัะณะปะฐะถะตะฝะฝัะน ััะตะฝะด

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- |Ret1s| > 0.10 โ ัะธะปัะฝัะน ะธะผะฟัะปัั (UP/DOWN ัะธะณะฝะฐะป)
- Ret1s ะธ Ret5s ะพะดะฝะพะณะพ ะทะฝะฐะบะฐ โ ะฟะพะดัะฒะตัะถะดะตะฝะฝัะน ััะตะฝะด
- ะะธะฒะตัะณะตะฝัะธั โ ัะฐะทะฒะพัะพั ะธะปะธ ะบะพะฝัะพะปะธะดะฐัะธั

**ะะพัะตะผั ะดะธะฝะฐะผะธัะตัะบะธะน:**
- ะะพะบะฐะทัะฒะฐะตั ะผะธะบัะพ-ะธะผะฟัะปััั โ ะพัะฝะพะฒะฐ ะดะปั entry/exit ัะตัะตะฝะธะน
- ะะฐััะตัะฝั (ะฟะตัะตัะตัะตะฝะธั, ะดะธะฒะตัะณะตะฝัะธะธ) ะบัะธัะธัะฝั
- Ret1s ัะตะทะบะพ ะฒััะพั, Ret5s ะฝะธะทะบะธะน โ ะฝะฐัะฐะปะพ ะธะผะฟัะปััะฐ (ะฝัะถะฝะฐ ะธััะพัะธั)

**ะกัะฐััั:** โ ะะตะฐะปะธะทะพะฒะฐะฝะพ ะบะฐะบ "Ret1s & Ret5s"

---

### ๐ฌ ะััะฟะฟะฐ 3: Volume & Spikes
**ะขะธะฟ:** ะะะะะะะงะะกะะะ (Cursor Animation)
**ะัะธะพัะธัะตั:** ๐ ะะซะกะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `binance_volume_1s` โ ััะพะปะฑัะฐัะฐั ะดะธะฐะณัะฐะผะผะฐ (bars)
- `binance_volume_5s` โ ัะพะปัััะต ะฟะพะปัะฟัะพะทัะฐัะฝัะต ะฑะฐัั (ะบะพะฝัะตะบัั)
- `binance_volma_30s` โ ัะบะพะปัะทััะตะต ััะตะดะฝะตะต (ะปะธะฝะธั)
- `binance_volume_spike` โ ะบะพัััะธัะธะตะฝั ะฒัะฟะปะตัะบะฐ (ะปะธะฝะธั, subplot)

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- Spike > 3.0 + Ret1s > 0.05 โ **ะกะะะฌะะซะ ะกะะะะะ UP**
- Spike > 3.0 + Ret1s < -0.05 โ **ะกะะะฌะะซะ ะกะะะะะ DOWN**
- Spike > 3.0 ะฑะตะท ะดะฒะธะถะตะฝะธั ัะตะฝั โ ะปะพะฒััะบะฐ / ะฝะฐะบะพะฟะปะตะฝะธะต

**ะะพัะตะผั ะดะธะฝะฐะผะธัะตัะบะธะน:**
- Volume spike ะฟัะตะดัะตััะฒัะตั ะดะฒะธะถะตะฝะธั ัะตะฝั โ ะฝัะถะฝะพ ะฒะธะดะตัั ะฟะฐััะตัะฝ
- ะัะฟะปะตัะบ ะพะฑัะตะผะฐ + ะดะฒะธะถะตะฝะธะต = ะธะผะฟัะปัั, ะฒัะฟะปะตัะบ ะฑะตะท ะดะฒะธะถะตะฝะธั = ะฝะฐะบะพะฟะปะตะฝะธะต
- ะัะธัะธัะฝะพ ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั ัะพัะณะพะฒัั ัะธะณะฝะฐะปะพะฒ

**ะกัะฐััั:** ๐ ะคะฐะนะป ัะพะทะดะฐะฝ `volume_chart.py`, ััะตะฑัะตั ะธะฝัะตะณัะฐัะธะธ ะฒ layout + callbacks

**ะะตะบะพะผะตะฝะดะฐัะธั ะฟะพ ัะตะฐะปะธะทะฐัะธะธ:**
```python
# ะ layout.py ะดะพะฑะฐะฒะธัั:
dcc.Graph(id='chart-volume', style={'height': '700px', 'width': '100%'})

# ะ callbacks.py:
# - ะกะพะทะดะฐัั initial figure ัะตัะตะท create_volume_figure()
# - ะะพะฑะฐะฒะธัั patch callback ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั ะผะฐัะบะตัะพะฒ ัะตะบััะตะน ะฟะพะทะธัะธะธ
# - ะะฑะฝะพะฒะปััั traces 3 (current V1s) ะธ 5 (current Spike)
```

---

### ๐ ะััะฟะฟะฐ 4: Volatility (ATR & RVol)
**ะขะธะฟ:** ะกะขะะขะะงะะกะะะฏ ะะะะะะฌ (ะธะฝะดะธะบะฐัะพัั)
**ะัะธะพัะธัะตั:** ๐ก ะกะะะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `binance_atr_5s` โ ะฑััััะฐั ะฒะพะปะฐัะธะปัะฝะพััั (USD)
- `binance_atr_30s` โ ะผะตะดะปะตะฝะฝะฐั ะฒะพะปะฐัะธะปัะฝะพััั (USD)
- `binance_rvol_30s` โ ัะตะฐะปะธะทะพะฒะฐะฝะฝะฐั ะฒะพะปะฐัะธะปัะฝะพััั (%)

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- ATR5s > 20 โ ะฒััะพะบะฐั ะฒะพะปะฐัะธะปัะฝะพััั, ะพััะพัะพะถะฝะพััั ั ัะฐะทะผะตัะพะผ ะฟะพะทะธัะธะธ
- ATR5s > 2รATR30s โ ััะฝะพะบ "ะฟัะพัะฝัะปัั", ะฟัะพะดะพะปะถะตะฝะธะต ะดะฒะธะถะตะฝะธั
- RVol > 0.10% โ ะฒะพะทะผะพะถะตะฝ ะฟัะพะฑะพะน ััะพะฒะฝั

**ะะพัะตะผั ััะฐัะธัะตัะบะธะน:**
- ะัะฟะพะปัะทัะตััั ะดะปั **sizing ะฟะพะทะธัะธะน**, ะฐ ะฝะต ะดะปั timing ะฒัะพะดะฐ
- ะขะตะบััะตะต ะทะฝะฐัะตะฝะธะต ATR ะดะพััะฐัะพัะฝะพ ะดะปั ัััะฐะฝะพะฒะบะธ stop-loss
- ะะพะปะฐัะธะปัะฝะพััั ะผะตะฝัะตััั ะผะตะดะปะตะฝะฝะตะต, ัะตะผ ัะตะฝะฐ
- ะะต ััะตะฑัะตั ะธััะพัะธะธ ะดะปั ะฟัะธะฝััะธั ัะตัะตะฝะธะน

**ะะตะบะพะผะตะฝะดัะตะผัะน ัะพัะผะฐั:**
ะะฝะดะธะบะฐัะพัะฝัะต ะฟะฐะฝะตะปะธ ะฒ right panel:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ VOLATILITY              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ATR5s:  12.5 ๐ข Normal  โ
โ ATR30s: 10.2            โ
โ RVol:   0.08% ๐ข        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะฆะฒะตัะพะฒะฐั ะบะพะดะธัะพะฒะบะฐ:**
- ๐ข ATR5s < 15 (ะฝะพัะผะฐะปัะฝะพ)
- ๐ก ATR5s 15-20 (ะฟะพะฒััะตะฝะฝะฐั)
- ๐ด ATR5s > 20 (ะฒััะพะบะฐั, ะพััะพัะพะถะฝะพ)

---

### ๐ฌ/๐ ะััะฟะฟะฐ 5: VWAP Deviation (ะะะะะะ)
**ะขะธะฟ:** ะะะะะะะงะะกะะะ ะณัะฐัะธะบ ะะะ overlay ะฝะฐ BTC Price
**ะัะธะพัะธัะตั:** ๐ก ะกะะะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `binance_vwap_30s` โ ััะตะดะฝะตะฒะทะฒะตัะตะฝะฝะฐั ัะตะฝะฐ
- `binance_p_vwap_5s` โ ะฑััััะพะต ะพัะบะปะพะฝะตะฝะธะต (%)
- `binance_p_vwap_30s` โ ะผะตะดะปะตะฝะฝะพะต ะพัะบะปะพะฝะตะฝะธะต (%)

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- P/VWAP > 0 โ ะฟะพะบัะฟะฐัะตะปััะบะพะต ะดะฐะฒะปะตะฝะธะต (ะฑััะธะน)
- ะะธะฒะตัะณะตะฝัะธั P/VWAP5s ะธ P/VWAP30s โ ัะธะณะฝะฐะป ัะฐะทะฒะพัะพัะฐ
- ะะตัะตัะตัะตะฝะธะต ะปะธะฝะธะน โ ัะผะตะฝะฐ ะฝะฐะฟัะฐะฒะปะตะฝะธั

**ะะฐัะธะฐะฝัั ัะตะฐะปะธะทะฐัะธะธ:**

#### ะะฐัะธะฐะฝั A: Overlay ะฝะฐ BTC Price (ัะตะบะพะผะตะฝะดัะตััั)
ะะพะฑะฐะฒะธัั VWAP30s ะบะฐะบ ะฟัะฝะบัะธัะฝัั ะปะธะฝะธั ะฝะฐ ะณัะฐัะธะบ BTC Price:
- ะญะบะพะฝะพะผะธั ะผะตััะพ
- ะะพะบะฐะทัะฒะฐะตั ะพัะบะปะพะฝะตะฝะธะต ัะตะฝั ะพั "ัะฟัะฐะฒะตะดะปะธะฒะพะน" ัะตะฝั ะฒะธะทัะฐะปัะฝะพ
- VWAP โ ะบะปััะตะฒะพะน ััะพะฒะตะฝั ะดะปั ะบััะฟะฝัั ะธะณัะพะบะพะฒ

#### ะะฐัะธะฐะฝั B: ะัะดะตะปัะฝัะน ะพััะธะปะปััะพั
ะัะดะตะปัะฝัะน ะณัะฐัะธะบ P/VWAP5s ะธ P/VWAP30s ะฒะพะบััะณ ะฝัะปั:
- ะะพะปะตะต ัะฒะฝัะต ัะธะณะฝะฐะปั ะฟะตัะตัะตัะตะฝะธั
- ะฃะดะพะฑะฝะตะต ะดะปั ะฐะปะณะพัะธัะผะธัะตัะบะพะน ัะพัะณะพะฒะปะธ

**ะะตะบะพะผะตะฝะดะฐัะธั:** ะะฐัะธะฐะฝั A (overlay) + ัะตะบััะธะต ะทะฝะฐัะตะฝะธั ะฒ right panel

---

### ๐ ะััะฟะฟะฐ 6: Latency Direction
**ะขะธะฟ:** ะกะขะะขะะงะะกะะะฏ ะะะะะะฌ (ะผะพะถะตั ะฑััั ะฟััััะผ)
**ะัะธะพัะธัะตั:** ๐ข ะะะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `lat_dir_raw_x1000` โ ัััะพะน ัะธะณะฝะฐะป (lag ร ret1s ร 1000)
- `lat_dir_norm_x1000` โ ะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝัะน

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- ะะพะบะฐะทัะฒะฐะตั "ะฐัะฑะธััะฐะถะฝะพะต ะพะบะฝะพ" ะตัะปะธ Binance ะดะฒะธะฝัะปัั, ะฐ ะพัะฐะบัะป ะฝะตั

**ะะพัะตะผั ััะฐัะธัะตัะบะธะน:**
- ะะพะถะตั ะฑััั ะฟััััะผ ะฒ ะฝะฐัะฐะปะต ััะฝะบะฐ (ะฝะตั ะดะฐะฝะฝัั ะพัะฐะบัะปะฐ)
- ะะฝัะพัะผะฐัะธั ะดัะฑะปะธััะตััั Lag ะณัะฐัะธะบะพะผ ะฒ ะณััะฟะฟะต 1
- ะะพะปะตะต ัะปะพะถะฝะฐั ะผะตััะธะบะฐ ะดะปั ะธะฝัะตัะฟัะตัะฐัะธะธ

**ะะตะบะพะผะตะฝะดัะตะผัะน ัะพัะผะฐั:**
Badge ะฒ right panel:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ LAG DIRECTION           โ
โ +2.5 ๐ข UP window       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### ๐ฌ ะััะฟะฟะฐ 7: Orderbook Visualization
**ะขะธะฟ:** ะะะะะะะงะะกะะะ (Full Animation)
**ะัะธะพัะธัะตั:** ๐ด ะะะะขะะงะะกะะะ (ัะถะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)

**ะะตัะตะผะตะฝะฝัะต:**
- `up_bid_[1-5]_price/size`, `up_ask_[1-5]_price/size`
- `down_bid_[1-5]_price/size`, `down_ask_[1-5]_price/size`

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- ะขะพะปัััะต ะฑะธะดั, ัะพะฝะบะธะต ะฐัะบะธ โ ะฟะพะบัะฟะฐัะตะปััะบะพะต ะดะฐะฒะปะตะฝะธะต
- ะะพะปััะพะน ะพัะดะตั โ "ััะตะฝะฐ" (support/resistance)
- ะคะพัะผะธัะพะฒะฐะฝะธะต ะธ ัะฝััะธะต ััะตะฝ โ ะพะฟะตัะตะถะฐััะธะน ะธะฝะดะธะบะฐัะพั

**ะะพัะตะผั ะดะธะฝะฐะผะธัะตัะบะธะน:**
- ะกัะฐะบะฐะฝั ะผะตะฝััััั ะบะฐะถะดัั ัะตะบัะฝะดั
- "ะกัะตะฝั" ะฟะพัะฒะปััััั ะธ ะธััะตะทะฐัั โ ะบัะธัะธัะฝะพ ะฒะธะดะตัั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะคะพัะผะฐ ััะฐะบะฐะฝะฐ (ะฝะต ัะพะปัะบะพ ัะธััั) ะดะฐะตั ะฒะธะทัะฐะปัะฝะพะต ะฟะพะฝะธะผะฐะฝะธะต ะดะฐะฒะปะตะฝะธั

**ะกัะฐััั:** โ ะะตะฐะปะธะทะพะฒะฐะฝะพ ะบะฐะบ "Orderbook"

---

### ๐ฌ ะััะฟะฟะฐ 8: Depth, Imbalance & Arbitrage
**ะขะธะฟ:** ะกะะะจะะะะซะ (Imbalance โ ะดะธะฝะฐะผะธัะตัะบะธะน, Arbitrage โ ััะฐัะธัะตัะบะธะน)
**ะัะธะพัะธัะตั:** ๐ ะะซะกะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `pm_up_imbalance`, `pm_down_imbalance` โ [-1, +1]
- `pm_up_bid_depth5`, `pm_up_ask_depth5` โ ััะผะผะฐัะฝัะน ะพะฑัะตะผ
- Arbitrage edge = 1.0 - (UP_bid + DOWN_bid)

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- Imbalance > +0.3 โ ัะธะปัะฝะพะต ะดะฐะฒะปะตะฝะธะต (BID PRESSURE)
- ะะตะทะบะพะต ะธะทะผะตะฝะตะฝะธะต Imbalance โ ะพะฟะตัะตะถะฐััะธะน ะธะฝะดะธะบะฐัะพั
- Edge > 0.02 โ ะฐัะฑะธััะฐะถะฝะฐั ะฒะพะทะผะพะถะฝะพััั

**ะะตะบะพะผะตะฝะดะฐัะธะธ:**

#### Imbalance โ ะะะะะะะงะะกะะะ ะณัะฐัะธะบ
```
ะัะฐัะธะบ-ะพััะธะปะปััะพั [-1, +1]:
- UP Imbalance (ะทะตะปะตะฝะฐั ะปะธะฝะธั)
- DOWN Imbalance (ะบัะฐัะฝะฐั ะปะธะฝะธั)
- ะะพัะธะทะพะฝัะฐะปัะฝัะต ะฟะพัะพะณะธ: ยฑ0.1, ยฑ0.3
```

**ะะพัะตะผั ะดะธะฝะฐะผะธัะตัะบะธะน:**
- ะะตะทะบะพะต ะธะทะผะตะฝะตะฝะธะต Imbalance ะฟัะตะดัะตััะฒัะตั ะดะฒะธะถะตะฝะธั ัะตะฝั
- ะะฐััะตัะฝ ะฒะฐะถะฝะตะต ะฐะฑัะพะปััะฝะพะณะพ ะทะฝะฐัะตะฝะธั

#### Arbitrage Edge โ ะกะขะะขะะงะะกะะะฏ ะฟะฐะฝะตะปั
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ARBITRAGE               โ
โ L1: 0.980 ๐ข +2.0%      โ
โ L2: 0.975 ๐ข +2.5%      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะพัะตะผั ััะฐัะธัะตัะบะธะน:**
- ะัะฑะธััะฐะถ ัะตะดะพะบ (Edge > 0 ัะพะปัะบะพ ะธะฝะพะณะดะฐ)
- ะะพััะฐัะพัะฝะพ alertะฐ ะบะพะณะดะฐ Edge > 0.02
- ะะต ััะตะฑัะตั ะธััะพัะธะธ

---

### ๐ ะััะฟะฟะฐ 9: Spread, Microprice, Slope
**ะขะธะฟ:** ะกะขะะขะะงะะกะะะฏ ะะะะะะฌ
**ะัะธะพัะธัะตั:** ๐ก ะกะะะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `pm_up_spread`, `pm_down_spread` โ (ask - bid)
- `pm_up_microprice`, `pm_down_microprice` โ ะฒะทะฒะตัะตะฝะฝะฐั ัะตัะตะดะธะฝะฐ
- `pm_up_bid_slope`, `pm_up_ask_slope` (UP), ะฐะฝะฐะปะพะณะธัะฝะพ DOWN

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- Spread > 0.05 โ ะฝะธะทะบะฐั ะปะธะบะฒะธะดะฝะพััั, ะปะธะผะธัะฝัะต ะพัะดะตัะฐ
- Slope > 0.6 โ "ััะตะฝะฐ" ะฝะฐ ะปัััะธั ััะพะฒะฝัั
- Microprice > Mid โ ะฟะพะบัะฟะฐัะตะปััะบะพะต ะดะฐะฒะปะตะฝะธะต

**ะะพัะตะผั ััะฐัะธัะตัะบะธะน:**
- ะัะฟะพะปัะทัะตััั ะดะปั **ะฒัะฑะพัะฐ ัะธะฟะฐ ะพัะดะตัะฐ** (market vs limit)
- ะขะตะบััะตะต ะทะฝะฐัะตะฝะธะต spread ะดะพััะฐัะพัะฝะพ ะดะปั ัะตัะตะฝะธั
- Slope ะฟะพะบะฐะทัะฒะฐะตั ััััะบัััั ััะฐะบะฐะฝะฐ, ะฝะพ ัะฐะผ ััะฐะบะฐะฝ ัะถะต ะฒะธะทัะฐะปะธะทะธัะพะฒะฐะฝ

**ะะตะบะพะผะตะฝะดัะตะผัะน ัะพัะผะฐั:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ MARKET MICROSTRUCTURE       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ UP:   Spread: 0.03 ๐ข       โ
โ       Micro:  0.527         โ
โ       Slope:  0.55 (Normal) โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ DOWN: Spread: 0.04 ๐ข       โ
โ       Micro:  0.468         โ
โ       Slope:  0.52 (Normal) โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### ๐ฌ ะััะฟะฟะฐ 10: Eat-Flow
**ะขะธะฟ:** ะะะะะะะงะะกะะะ (Cursor Animation)
**ะัะธะพัะธัะตั:** ๐ ะะซะกะะะะ

**ะะตัะตะผะตะฝะฝัะต:**
- `pm_up_bid_eatflow`, `pm_up_ask_eatflow`
- `pm_down_bid_eatflow`, `pm_down_ask_eatflow`
- ะะดะธะฝะธัะฐ: ะบะพะฝััะฐะบัั/ัะตะบัะฝะดั

**ะขะพัะณะพะฒะฐั ัะตะฝะฝะพััั:**
- Eat-Flow < -50 โ ะฑะธะดั/ะฐัะบะธ **ะฐะบัะธะฒะฝะพ ััะตะดะฐัััั** โ ะฐะณัะตััะธะฒะฝัะต ัะตะนะบะตัั
- UP Ask Eat-Flow << 0 โ ะบัะพ-ัะพ ะฐะณัะตััะธะฒะฝะพ ะฟะพะบัะฟะฐะตั UP โ **ะกะะะะะ UP**
- ะะดะธะฝ ะธะท ัะฐะผัั ะฒะฐะถะฝัั ะธะฝะดะธะบะฐัะพัะพะฒ ัะตะฐะปัะฝะพะน ะฐะบัะธะฒะฝะพััะธ

**ะะพัะตะผั ะดะธะฝะฐะผะธัะตัะบะธะน:**
- ะะพะบะฐะทัะฒะฐะตั ัะตะฐะปัะฝัั ะฐะบัะธะฒะฝะพััั ัะตะนะบะตัะพะฒ, ะฝะต ะฟัะพััะพ ัะฐะทะผะตัะตะฝะธะต ะพัะดะตัะพะฒ
- Eat-Flow < -100 + Slope > 0.7 โ "ััะตะฝะฐ ะฟัะพะฑะธัะฐ" (ะฝัะถะฝะฐ ะธััะพัะธั ะฟะฐััะตัะฝะฐ)
- ะะธะฒะตัะณะตะฝัะธั Eat-Flow ะธ Imbalance โ ะผะฐัะบะตั-ะผะตะนะบะตั ะฒะพัะฟะพะปะฝัะตั ะปะธะบะฒะธะดะฝะพััั

**ะะตะบะพะผะตะฝะดัะตะผัะน ัะพัะผะฐั:**
```
ะะฒะฐ ะพััะธะปะปััะพัะฐ (UP ะธ DOWN):
- Bid Eat-Flow (ะทะตะปะตะฝัะต/ะบัะฐัะฝัะต ะฑะฐัั)
- Ask Eat-Flow (ะทะตะปะตะฝัะต/ะบัะฐัะฝัะต ะฑะฐัั)
- ะะพัะพะณะธ: ยฑ10, ยฑ50
```

---

### ๐ฏ ะััะฟะฟะฐ 11: Signal Overlay
**ะขะธะฟ:** OVERLAY (ะฒะตััะธะบะฐะปัะฝัะต ะผะฐัะบะตัั ะฝะฐ ะฒัะตั ะณัะฐัะธะบะฐั)
**ะัะธะพัะธัะตั:** ๐ก ะกะะะะะะ (ะฑัะดััะฐั ัะฐะทะฐ)

**ะกะธะณะฝะฐะปั:**
1. **Momentum Breakout** ๐ข/๐ด โ |Ret1s| > 0.10 + Spike > 3.0 + Imbalance > +0.2
2. **Fade Extreme** โ๏ธ โ |Ret5s| > 0.30 + Spike ัะฝะธะถะฐะตััั
3. **Orderbook Pressure** ๐ โ Eat-Flow < -100 + Slope > 0.7
4. **Arbitrage** ๐ฐ โ Edge > 0.02

**ะะตะฐะปะธะทะฐัะธั:**
- ะะตััะธะบะฐะปัะฝัะต ะปะธะฝะธะธ/ะธะบะพะฝะบะธ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ััะปะพะฒะธะน
- Tooltip ั ะดะตัะฐะปัะผะธ ัะธะณะฝะฐะปะฐ
- ะกะธะฝััะพะฝะธะทะธัะพะฒะฐะฝั ะผะตะถะดั ะฒัะตะผะธ ะณัะฐัะธะบะฐะผะธ

**ะกัะฐััั:** ะัะดััะฐั ัะฐะทะฐ (ััะตะฑัะตั ัะฐััะตัะฐ ะบะพะผะฟะพะทะธัะฝัั ััะปะพะฒะธะน)

---

## ะัะพะณะพะฒะฐั ัะฐะฑะปะธัะฐ ัะตะฐะปะธะทะฐัะธะธ

| # | ะััะฟะฟะฐ | ะขะธะฟ | ะัะธะพัะธัะตั | ะกัะฐััั | ะะตะบะพะผะตะฝะดะฐัะธั |
|---|--------|-----|-----------|--------|--------------|
| 0 | **Header** | ะกัะฐัะธัะตัะบะฐั ะฟะฐะฝะตะปั | ๐ด | โ ะะพัะพะฒะพ | Right panel timer |
| 1 | **BTC Price & Lag** | ะะธะฝะฐะผะธัะตัะบะธะน (Cursor) | ๐ด | โ ะะพัะพะฒะพ | โ |
| 2 | **Returns (Ret1s/5s)** | ะะธะฝะฐะผะธัะตัะบะธะน (Cursor) | ๐ด | โ ะะพัะพะฒะพ | โ |
| 3 | **Volume & Spikes** | ะะธะฝะฐะผะธัะตัะบะธะน (Cursor) | ๐ | ๐ ะกะพะทะดะฐะฝ | ะะพะฑะฐะฒะธัั ะฒ layout + callbacks |
| 4 | **Volatility (ATR/RVol)** | ะกัะฐัะธัะตัะบะฐั ะฟะฐะฝะตะปั | ๐ก | โฌ TODO | Right panel indicators |
| 5 | **VWAP Deviation** | Overlay ะฝะฐ ะณัะฐัะธะบ 1 | ๐ก | โฌ TODO | ะะพะฑะฐะฒะธัั VWAP ะปะธะฝะธั ะฝะฐ BTC chart |
| 6 | **Latency Direction** | ะกัะฐัะธัะตัะบะฐั ะฟะฐะฝะตะปั | ๐ข | โฌ TODO | Right panel badge (ะพะฟัะธะพะฝะฐะปัะฝะพ) |
| 7 | **Orderbook** | ะะธะฝะฐะผะธัะตัะบะธะน (Full) | ๐ด | โ ะะพัะพะฒะพ | โ |
| 8a | **Imbalance** | ะะธะฝะฐะผะธัะตัะบะธะน (Cursor) | ๐ | โฌ TODO | ะะพะฒัะน ะณัะฐัะธะบ-ะพััะธะปะปััะพั |
| 8b | **Arbitrage** | ะกัะฐัะธัะตัะบะฐั ะฟะฐะฝะตะปั | ๐ก | โฌ TODO | Right panel alert |
| 9 | **Spread/Slope** | ะกัะฐัะธัะตัะบะฐั ะฟะฐะฝะตะปั | ๐ก | โฌ TODO | Right panel microstructure |
| 10 | **Eat-Flow** | ะะธะฝะฐะผะธัะตัะบะธะน (Cursor) | ๐ | โฌ TODO | ะะพะฒัะน ะณัะฐัะธะบ (ะฑะฐัั) |
| 11 | **Signal Overlay** | Overlay ะผะฐัะบะตัั | ๐ก | โฌ ะัะดััะตะต | ะะพะผะฟะพะทะธัะฝัะต ััะปะพะฒะธั |

---

## ะัะธะพัะธัะตัั ะฒะฝะตะดัะตะฝะธั

### ะคะฐะทะฐ 1: ะัะธัะธัะตัะบะธะต ะณัะฐัะธะบะธ โ ะะะะะะจะะะ
- [x] Orderbook (Full Animation)
- [x] BTC Price & Lag (Cursor)
- [x] Returns (Cursor)
- [x] Market Timer (Static panel)

### ะคะฐะทะฐ 2: ะััะพะบะพะฟัะธะพัะธัะตัะฝัะต ะผะตััะธะบะธ ๐ ะ ะะะะะขะ
- [ ] **Volume & Spikes** (ะดะธะฝะฐะผะธัะตัะบะธะน) โ ัะฐะนะป ัะพะทะดะฐะฝ, ะฝัะถะฝะฐ ะธะฝัะตะณัะฐัะธั
- [ ] **Imbalance** (ะดะธะฝะฐะผะธัะตัะบะธะน) โ ะฝะพะฒัะน ะณัะฐัะธะบ
- [ ] **Eat-Flow** (ะดะธะฝะฐะผะธัะตัะบะธะน) โ ะฝะพะฒัะน ะณัะฐัะธะบ

### ะคะฐะทะฐ 3: ะกัะฐัะธัะตัะบะธะต ะฟะฐะฝะตะปะธ ะธะฝะดะธะบะฐัะพัะพะฒ
ะะพะฑะฐะฒะธัั ะฒ right panel:
- [ ] **Volatility Indicators** (ATR5s, ATR30s, RVol)
- [ ] **Microstructure Panel** (Spread, Microprice, Slope)
- [ ] **Arbitrage Alert** (Edge > 0.02)

### ะคะฐะทะฐ 4: ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะปัััะตะฝะธั
- [ ] **VWAP overlay** ะฝะฐ BTC Price ะณัะฐัะธะบ
- [ ] **Signal Overlay** (ะบะพะผะฟะพะทะธัะฝัะต ัะพัะณะพะฒัะต ัะธะณะฝะฐะปั)
- [ ] **Latency Direction** badge (ะพะฟัะธะพะฝะฐะปัะฝะพ)

---

## ะขะตัะฝะธัะตัะบะธะต ัะตะบะพะผะตะฝะดะฐัะธะธ

### ะะปั ะดะธะฝะฐะผะธัะตัะบะธั ะณัะฐัะธะบะพะฒ (Cursor Animation):
1. **Initial Figure**: ะกะพะทะดะฐัั ัะตัะตะท `create_*_figure(df, row_idx=0)`
2. **Playback Callback**: Patch callback ะพะฑะฝะพะฒะปัะตั ะผะฐัะบะตัั ัะตะบััะตะน ะฟะพะทะธัะธะธ
3. **Traces Structure**:
   - Traces 0-N: ะะธะฝะธะธ/ะฑะฐัั ะธััะพัะธะธ (ััะฐัะธัะฝัะต)
   - Traces N+1: Current value marker (ะพะฑะฝะพะฒะปัะตััั)

**ะัะธะผะตั ััััะบัััั traces ะดะปั Volume:**
```python
# Trace 0: Volume 5s (bars, ะฟะพะปัะฟัะพะทัะฐัะฝัะต)
# Trace 1: Volume 1s (bars, ะดะธะฝะฐะผะธัะตัะบะธะน ัะฒะตั)
# Trace 2: VolMA 30s (line)
# Trace 3: Current V1s marker โ ะพะฑะฝะพะฒะปัะตััั ะฒ playback
# Trace 4: Volume Spike (line, subplot)
# Trace 5: Current Spike marker โ ะพะฑะฝะพะฒะปัะตััั ะฒ playback
```

### ะะปั ััะฐัะธัะตัะบะธั ะฟะฐะฝะตะปะตะน (Right Panel):
1. **ะกะพะทะดะฐัั ััะฝะบัะธั** `create_*_panel()` ะฒ `right_panel.py`
2. **Callback** ะพะฑะฝะพะฒะปัะตั ะทะฝะฐัะตะฝะธั ัะตัะตะท `Output('*-indicator', 'children')`
3. **ะฆะฒะตัะพะฒะฐั ะบะพะดะธัะพะฒะบะฐ**:
   ```python
   def get_color(value, thresholds):
       if value < thresholds['green']: return '#4CAF50'
       elif value < thresholds['yellow']: return '#FFC107'
       else: return '#F44336'
   ```

### ะกะธะฝััะพะฝะธะทะฐัะธั ั Playback:
ะัะต ะดะธะฝะฐะผะธัะตัะบะธะต ะณัะฐัะธะบะธ ะดะพะปะถะฝั ะพะฑะฝะพะฒะปััััั ัะธะฝััะพะฝะฝะพ ัะตัะตะท ะตะดะธะฝัะน slider:
- `update_all_charts()` callback ั `Input('timeline-slider', 'value')`
- Patch ะฒัะตั ะณัะฐัะธะบะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะดะปั ะบะพะฝัะธััะตะฝัะฝะพััะธ

---

## ะะฐะบะปััะตะฝะธะต

**ะะตะบะพะผะตะฝะดัะตะผะฐั ััััะบัััะฐ ะดะฐัะฑะพัะดะฐ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
โ MAIN AREA (Scrollable)                          โ RIGHT PANEL     โ
โ                                                 โ (Sticky)        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค                 โ
โ ๐ฌ BTC Price & Lag (700px) + VWAP overlay      โ โฑ๏ธ Market Timer โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค                 โ
โ ๐ฌ Returns: Ret1s & Ret5s (700px)              โ ๐ Volatility   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค    - ATR5s      โ
โ ๐ฌ Volume & Spikes (700px)                     โ    - ATR30s     โ
โ    - V1s bars + VolMA line                      โ    - RVol       โ
โ    - Spike subplot                              โ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค ๐ Microstruc.  โ
โ ๐ฌ Orderbook UP/DOWN (700px)                   โ    - Spread     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค    - Microprice โ
โ ๐ฌ Imbalance (700px)                           โ    - Slope      โ
โ    - UP Imbalance line                          โ                 โ
โ    - DOWN Imbalance line                        โ ๐ฐ Arbitrage    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค    - L1 Edge    โ
โ ๐ฌ Eat-Flow (700px)                            โ                 โ
โ    - UP Bid/Ask bars                            โ                 โ
โ    - DOWN Bid/Ask bars                          โ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
```

**ะะปััะตะฒะพะน ะฟัะธะฝัะธะฟ:**
- ะะธะฝะฐะผะธัะตัะบะธะต ะณัะฐัะธะบะธ ะดะปั **ัะธะณะฝะฐะปะพะฒ** (ะบะพะณะดะฐ ะฒะฐะถะฝั ะฟะฐััะตัะฝั ะธ ััะตะฝะดั)
- ะกัะฐัะธัะตัะบะธะต ะฟะฐะฝะตะปะธ ะดะปั **ะบะพะฝัะตะบััะฐ** (sizing, ะฒัะฑะพั ัะธะฟะฐ ะพัะดะตัะฐ, ัะธัะบ-ะผะตะฝะตะดะถะผะตะฝั)

ะญัะพั ะฟะพะดัะพะด ะพะฑะตัะฟะตัะธะฒะฐะตั ะฑะฐะปะฐะฝั ะผะตะถะดั ะธะฝัะพัะผะฐัะธะฒะฝะพัััั ะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพัััั ัะธััะตะผั playback.
